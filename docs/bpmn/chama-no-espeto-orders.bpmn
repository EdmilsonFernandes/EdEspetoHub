<?xml version='1.0' encoding='utf-8'?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_ChamaNoEspetoOrders" targetNamespace="https://datony.com/chama-no-espeto/bpmn"><bpmn:process id="ChamaNoEspetoOrders" name="Fluxo de Pedidos e Operacao" isExecutable="false"><bpmn:laneSet id="LaneSet_ChamaNoEspetoOrders"><bpmn:lane id="Lane_Customer_Order" name="Cliente"><bpmn:flowNodeRef>Start_CustomerJourney</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_AccessStore</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_AssembleOrder</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_SendOrder</bpmn:flowNodeRef><bpmn:flowNodeRef>Gateway_AdminOrder</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ReceivePix</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ReturnMenu</bpmn:flowNodeRef><bpmn:flowNodeRef>End_OrderDelivered</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="Lane_API_Order" name="API / Backend"><bpmn:flowNodeRef>Task_ValidateStore</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ValidateProducts</bpmn:flowNodeRef><bpmn:flowNodeRef>Gateway_OrderValid</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_CreateOrder</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ExposeOrderQueue</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_NotifyPaymentStatus</bpmn:flowNodeRef></bpmn:lane><bpmn:lane id="Lane_Admin_Order" name="Painel interno / Operacao"><bpmn:flowNodeRef>Start_AdminOps</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_LoginDashboard</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ManageCatalog</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_UpdateStoreStatus</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_MonitorQueue</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_PrepareOrder</bpmn:flowNodeRef><bpmn:flowNodeRef>Task_ConfirmDelivery</bpmn:flowNodeRef></bpmn:lane></bpmn:laneSet><bpmn:startEvent id="Start_CustomerJourney" name="Cliente acessa loja online" /><bpmn:task id="Task_AccessStore" name="Abrir loja pelo slug (GET /stores/:slug)" /><bpmn:task id="Task_AssembleOrder" name="Montar e revisar pedido" /><bpmn:task id="Task_SendOrder" name="Enviar pedido (POST /stores/:slug/orders)" /><bpmn:task id="Task_ValidateStore" name="Validar loja" /><bpmn:task id="Task_ValidateProducts" name="Validar itens e calcular total" /><bpmn:exclusiveGateway id="Gateway_OrderValid" name="Pedido valido?" /><bpmn:task id="Task_CreateOrder" name="Persistir pedido e itens" /><bpmn:task id="Task_ExposeOrderQueue" name="Expor pedido na fila" /><bpmn:exclusiveGateway id="Gateway_AdminOrder" name="Pedido criado por admin?" /><bpmn:task id="Task_ReceivePix" name="Receber resumo + link (salvar ultimos 3 pedidos)" /><bpmn:task id="Task_ReturnMenu" name="Voltar para o cardapio" /><bpmn:endEvent id="End_OrderDelivered" name="Pedido entregue / retirada" /><bpmn:startEvent id="Start_AdminOps" name="Operacao diaria" /><bpmn:task id="Task_LoginDashboard" name="Login no painel interno (POST /auth/login)" /><bpmn:task id="Task_ManageCatalog" name="Criar/atualizar produtos (POST/PUT /stores/:id/products)" /><bpmn:task id="Task_UpdateStoreStatus" name="Publicar/pausar loja (PUT /stores/:id/status)" /><bpmn:task id="Task_MonitorQueue" name="Monitorar fila do churrasqueiro (atualizacao a cada 5s)" /><bpmn:task id="Task_PrepareOrder" name="Assar espetos e atualizar status" /><bpmn:task id="Task_ConfirmDelivery" name="Finalizar pedido e registrar pagamento" /><bpmn:task id="Task_NotifyPaymentStatus" name="Gerar notificacoes (WhatsApp/links)" /><bpmn:sequenceFlow id="Flow_StartToAccess" sourceRef="Start_CustomerJourney" targetRef="Task_AccessStore" /><bpmn:sequenceFlow id="Flow_AccessToAssemble" sourceRef="Task_AccessStore" targetRef="Task_AssembleOrder" /><bpmn:sequenceFlow id="Flow_AssembleToSend" sourceRef="Task_AssembleOrder" targetRef="Task_SendOrder" /><bpmn:sequenceFlow id="Flow_SendToBackend" sourceRef="Task_SendOrder" targetRef="Task_ValidateStore" /><bpmn:sequenceFlow id="Flow_ValidateStore" sourceRef="Task_ValidateStore" targetRef="Task_ValidateProducts" /><bpmn:sequenceFlow id="Flow_ValidateProducts" sourceRef="Task_ValidateProducts" targetRef="Gateway_OrderValid" /><bpmn:sequenceFlow id="Flow_InvalidOrder" sourceRef="Gateway_OrderValid" targetRef="Task_AssembleOrder" name="Rejeitado" /><bpmn:sequenceFlow id="Flow_ValidOrder" sourceRef="Gateway_OrderValid" targetRef="Task_CreateOrder" name="Aprovado" /><bpmn:sequenceFlow id="Flow_CreateToQueue" sourceRef="Task_CreateOrder" targetRef="Task_ExposeOrderQueue" /><bpmn:sequenceFlow id="Flow_QueueToCustomer" sourceRef="Task_ExposeOrderQueue" targetRef="Gateway_AdminOrder" /><bpmn:sequenceFlow id="Flow_AdminOrderYes" sourceRef="Gateway_AdminOrder" targetRef="Task_ReturnMenu" name="Sim" /><bpmn:sequenceFlow id="Flow_AdminOrderNo" sourceRef="Gateway_AdminOrder" targetRef="Task_ReceivePix" name="Nao" /><bpmn:sequenceFlow id="Flow_ReturnToAssemble" sourceRef="Task_ReturnMenu" targetRef="Task_AssembleOrder" name="Novo pedido" /><bpmn:sequenceFlow id="Flow_QueueToDashboard" sourceRef="Task_ExposeOrderQueue" targetRef="Task_MonitorQueue" /><bpmn:sequenceFlow id="Flow_PaymentSync" sourceRef="Task_NotifyPaymentStatus" targetRef="Task_MonitorQueue" /><bpmn:sequenceFlow id="Flow_AdminStart" sourceRef="Start_AdminOps" targetRef="Task_LoginDashboard" /><bpmn:sequenceFlow id="Flow_LoginToCatalog" sourceRef="Task_LoginDashboard" targetRef="Task_ManageCatalog" /><bpmn:sequenceFlow id="Flow_CatalogToStatus" sourceRef="Task_ManageCatalog" targetRef="Task_UpdateStoreStatus" /><bpmn:sequenceFlow id="Flow_StatusToQueue" sourceRef="Task_UpdateStoreStatus" targetRef="Task_MonitorQueue" /><bpmn:sequenceFlow id="Flow_MonitorToPrepare" sourceRef="Task_MonitorQueue" targetRef="Task_PrepareOrder" /><bpmn:sequenceFlow id="Flow_PrepareToConfirm" sourceRef="Task_PrepareOrder" targetRef="Task_ConfirmDelivery" /><bpmn:sequenceFlow id="Flow_ConfirmToEnd" sourceRef="Task_ConfirmDelivery" targetRef="End_OrderDelivered" /><bpmn:sequenceFlow id="Flow_QueueBackPayment" sourceRef="Task_ExposeOrderQueue" targetRef="Task_NotifyPaymentStatus" /></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_ChamaNoEspetoOrders"><bpmndi:BPMNPlane id="BPMNPlane_ChamaNoEspetoOrders" bpmnElement="ChamaNoEspetoOrders"><bpmndi:BPMNShape id="DI_Lane_Customer_Order" bpmnElement="Lane_Customer_Order" isHorizontal="true"><dc:Bounds x="40" y="100" width="1500" height="200" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Lane_API_Order" bpmnElement="Lane_API_Order" isHorizontal="true"><dc:Bounds x="40" y="320" width="1500" height="200" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Lane_Admin_Order" bpmnElement="Lane_Admin_Order" isHorizontal="true"><dc:Bounds x="40" y="540" width="1500" height="200" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Start_CustomerJourney" bpmnElement="Start_CustomerJourney"><dc:Bounds x="180" y="140" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_AccessStore" bpmnElement="Task_AccessStore"><dc:Bounds x="440" y="140" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_AssembleOrder" bpmnElement="Task_AssembleOrder"><dc:Bounds x="700" y="140" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_SendOrder" bpmnElement="Task_SendOrder"><dc:Bounds x="960" y="140" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Gateway_AdminOrder" bpmnElement="Gateway_AdminOrder"><dc:Bounds x="180" y="250" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ReceivePix" bpmnElement="Task_ReceivePix"><dc:Bounds x="440" y="250" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ReturnMenu" bpmnElement="Task_ReturnMenu"><dc:Bounds x="700" y="250" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_End_OrderDelivered" bpmnElement="End_OrderDelivered"><dc:Bounds x="960" y="250" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ValidateStore" bpmnElement="Task_ValidateStore"><dc:Bounds x="180" y="360" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ValidateProducts" bpmnElement="Task_ValidateProducts"><dc:Bounds x="440" y="360" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Gateway_OrderValid" bpmnElement="Gateway_OrderValid"><dc:Bounds x="700" y="360" width="50" height="50" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_CreateOrder" bpmnElement="Task_CreateOrder"><dc:Bounds x="960" y="360" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ExposeOrderQueue" bpmnElement="Task_ExposeOrderQueue"><dc:Bounds x="180" y="470" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_NotifyPaymentStatus" bpmnElement="Task_NotifyPaymentStatus"><dc:Bounds x="440" y="470" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Start_AdminOps" bpmnElement="Start_AdminOps"><dc:Bounds x="180" y="580" width="36" height="36" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_LoginDashboard" bpmnElement="Task_LoginDashboard"><dc:Bounds x="440" y="580" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ManageCatalog" bpmnElement="Task_ManageCatalog"><dc:Bounds x="700" y="580" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_UpdateStoreStatus" bpmnElement="Task_UpdateStoreStatus"><dc:Bounds x="960" y="580" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_MonitorQueue" bpmnElement="Task_MonitorQueue"><dc:Bounds x="180" y="690" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_PrepareOrder" bpmnElement="Task_PrepareOrder"><dc:Bounds x="440" y="690" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNShape id="DI_Task_ConfirmDelivery" bpmnElement="Task_ConfirmDelivery"><dc:Bounds x="700" y="690" width="150" height="80" /></bpmndi:BPMNShape><bpmndi:BPMNEdge id="DI_Flow_StartToAccess" bpmnElement="Flow_StartToAccess"><di:waypoint x="216" y="158.0" /><di:waypoint x="440" y="180.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_AccessToAssemble" bpmnElement="Flow_AccessToAssemble"><di:waypoint x="590" y="180.0" /><di:waypoint x="700" y="180.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_AssembleToSend" bpmnElement="Flow_AssembleToSend"><di:waypoint x="850" y="180.0" /><di:waypoint x="960" y="180.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_SendToBackend" bpmnElement="Flow_SendToBackend"><di:waypoint x="1110" y="180.0" /><di:waypoint x="180" y="400.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_ValidateStore" bpmnElement="Flow_ValidateStore"><di:waypoint x="330" y="400.0" /><di:waypoint x="440" y="400.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_ValidateProducts" bpmnElement="Flow_ValidateProducts"><di:waypoint x="590" y="400.0" /><di:waypoint x="700" y="385.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_InvalidOrder" bpmnElement="Flow_InvalidOrder"><di:waypoint x="750" y="385.0" /><di:waypoint x="700" y="180.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_ValidOrder" bpmnElement="Flow_ValidOrder"><di:waypoint x="750" y="385.0" /><di:waypoint x="960" y="400.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_CreateToQueue" bpmnElement="Flow_CreateToQueue"><di:waypoint x="1110" y="400.0" /><di:waypoint x="180" y="510.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_QueueToCustomer" bpmnElement="Flow_QueueToCustomer"><di:waypoint x="330" y="510.0" /><di:waypoint x="180" y="275.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_AdminOrderYes" bpmnElement="Flow_AdminOrderYes"><di:waypoint x="230" y="275.0" /><di:waypoint x="700" y="290.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_AdminOrderNo" bpmnElement="Flow_AdminOrderNo"><di:waypoint x="230" y="275.0" /><di:waypoint x="440" y="290.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_ReturnToAssemble" bpmnElement="Flow_ReturnToAssemble"><di:waypoint x="850" y="290.0" /><di:waypoint x="700" y="180.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_QueueToDashboard" bpmnElement="Flow_QueueToDashboard"><di:waypoint x="330" y="510.0" /><di:waypoint x="180" y="730.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_PaymentSync" bpmnElement="Flow_PaymentSync"><di:waypoint x="590" y="510.0" /><di:waypoint x="180" y="730.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_AdminStart" bpmnElement="Flow_AdminStart"><di:waypoint x="216" y="598.0" /><di:waypoint x="440" y="620.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_LoginToCatalog" bpmnElement="Flow_LoginToCatalog"><di:waypoint x="590" y="620.0" /><di:waypoint x="700" y="620.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_CatalogToStatus" bpmnElement="Flow_CatalogToStatus"><di:waypoint x="850" y="620.0" /><di:waypoint x="960" y="620.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_StatusToQueue" bpmnElement="Flow_StatusToQueue"><di:waypoint x="1110" y="620.0" /><di:waypoint x="180" y="730.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_MonitorToPrepare" bpmnElement="Flow_MonitorToPrepare"><di:waypoint x="330" y="730.0" /><di:waypoint x="440" y="730.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_PrepareToConfirm" bpmnElement="Flow_PrepareToConfirm"><di:waypoint x="590" y="730.0" /><di:waypoint x="700" y="730.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_ConfirmToEnd" bpmnElement="Flow_ConfirmToEnd"><di:waypoint x="850" y="730.0" /><di:waypoint x="960" y="268.0" /></bpmndi:BPMNEdge><bpmndi:BPMNEdge id="DI_Flow_QueueBackPayment" bpmnElement="Flow_QueueBackPayment"><di:waypoint x="330" y="510.0" /><di:waypoint x="440" y="510.0" /></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>